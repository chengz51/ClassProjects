# CSE 163 group project
### Summary of research questions and Results
- **As time goes, do the number of people with the problem of short sleep duration or insomnia in the U.S. increase or decrease? **
Over time, the number of people who have short sleep duration in the U.S. decreases. In the year 2015, the number reached the lowest, and it rebounded back in 2016. 

- **What kind of characteristics of people like their ages and sexes attribute to sleep problems ?**
Sex has little contribution on sleep problems. Old people have better sleep quality or fewer sleep problems than young people. People with higher education levels generally have worse sleep quality or more sleep problems than people with lower education levels. Students in university have the worst sleep quality or most sleep problems in this dataset. Fat people have better sleep quality or fewer sleep problems than thin people.

- **What is the impact of insomnia have on people like damaging people’s health?**
People with insomnia are more likely to experience some mental health problems like anxiety and depression. As insomnia severity index increases, anxiety index and depression index also increase. There is a negative relationship between insomnia severity index and health problem index. There is not an obvious linear relationship between bmi and insomnia severity index.

### Finding Data
##### Dataset
https://data.world/makeovermonday/2019w23
https://www.kaggle.com/feraco/sleep-deprivation/data?select=data_sleepybrain.csv
For the one on data world website,  the data file is called “Time Americans Spend Sleeping.” For the data in Kaggle, there are two datasets - “data_sleepybrain.csv”, “demdata_160225_pseudonymized.csv,” and the explanatory document “demdata_codebook_160226.txt.” 

### Methodology (algorithm or analysis)
To analyze the first research question, we are using the dataset called “Time Americans Spend Sleeping.” We filtered the data by taking out the parts not during the time from 2004 to 2016 and the data with missing values like NaN. After filtering, We sorted the data by the order of the year. We counted people who are under 25 years old and sleep less than 8.6 hours per day and people who are above 25 years old and sleep less than 9.3 hours per day as people with short sleep duration or so-called insomnia. With the counting number, we plotted out a line chart to indicate as time goes, if the people with the problems of short sleep duration increase or decrease. 
The datasets that we use for the second research question are the “demdata_160225_pseudonymized.csv” and “data_sleepybrain.csv” from Kaggle. In these two datasets, we have about 100 patients and lots of information about them is collected and listed in different columns in these datasets. First, we use some python codes to clean these two datasets in order to merge them to one single sheet of data, which is easier for us to handle. We edit one column named “id” in “data_sleepybrain.csv”, so we can merge these two datasets to one by connecting the two columns named “id” in these two sheets. Then, we clean the merged data by making some columns readable and concise. More specifically, we firstly select 11 columns that we will use in this sheet and drop all other columns. Secondly, since values stored in the “BMI1” column are strings and contain “,”, we replace the “,” with “.” and therefore we are able to convert those values to floats. Then, because there are three columns, named “KSQ_HealthProblems”, “KSQ_OverallSleepQuality” and “EducationLevel” seperately, contain Swedish, we make them into columns that only contain numbers as representation. Numerical values are much easier and, in all sense, enough for our analysis of this problem. After the cleaning of data, we export the new dataset which will be used later to a csv file named “data2.csv”. 

Now, we need to know whether their characteristics contribute to sleep problems, so we choose the column named “KSQ_OverallSleepQuality” as the measurement for sleep problems of patients. Here, after reading the instruction of the original dataset, we assume that an individual with higher KSQ_OverallSleepQuality value sleeps well and has little sleep problems, and vice versa. Then, we put all the patients into different categories according to their sexes, ages, BMIs and education levels using the “groupby” method in python and calculate the mean of KSQ_OverallSleepQuality within each group. Then, with the sample statistics we receive from the data, we observe there are only two categories of sex in this dataset, which are female and male, and they have slightly different but very similar value of mean of KSQ_OverallSleepQuality according to the data we have, so we want to set up a two sided hypothesis test to show if the female population has the same level of overall sleep quality as male population. Let μ_f be the mean of KSQ_OverallSleepQuality for females and μ_m be the mean of KSQ_OverallSleepQuality for males. In this case, the null hypothesis is μ_f = μ_m, and we make the size of test, which is also known as alpha, be 0.05, which means if we get a p value from this data greater than 0.05, we fail to reject the null hypothesis, implying sexuality does not affect overall sleep quality; if we get a p value from this data less than 0.05, we reject the null hypothesis, implying sexuality has some effects on overall sleep quality. We use the function ttest_rel() in scipy.stats to help us calculate p value from the data. As long as we plug in the data of KSQ_OverallSleepQuality for females and males separately as two parameters, the function returns the p value to us automatically. Then, we choose to plot the best fit lines, to show the correlation between KSQ_OverallSleepQuality and ages, education levels, BMIs of patients. After finishing these steps on the above, we are able to come up with some ideas about which characteristics of people contribute to sleep problems and short sleep duration.
 
The data we will use for the third research question is “data2.csv” that we already cleaned up from “demdata_160225_pseudonymized.csv” and “data_sleepybrain.csv”. First, we do some research on how sleeping may affect people’s mental health. After understanding the domain knowledge, we essentially set ISI as the independent value which is typically x value and have anxiety index, depression index, bmi, and health problem index as the dependent value which is y. We plot them in the same figure to see if either depression index and ISI or anxiety index and ISI have positive linear or negative relationships to analyze if short sleep duration have influences on people’s mental health like depression and anxiety. Using scatter plot may not necessarily show the relationship since it may overfit so that we also plot out the best fit line. 


##### Contributor
* Coco Cheng
* Mingyang Xue
